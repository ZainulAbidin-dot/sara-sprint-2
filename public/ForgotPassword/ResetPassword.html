<!DOCTYPE html>
<html lang="en">

<head> 

<meta charset="utf-8">


<link rel="stylesheet" href="../ForgotPassword/ResetPassword.css">
<link rel="stylesheet" href="../Preheader/Preheader.css">
<script src="../ForgotPassword/ResetPassword.js" ></script>
<script src="../Prefooter/Prefooter.js"></script>


</head>

<body> 
    <header class="header">
        <div class="header-logo">
            <span>T</span>ADAWI
        </div>
        <nav class="nav">
            <a href="../Home/HomePage.html">Home</a>
            <a href="../About-us/About-usPre.html">About us</a>
            <a href="../HelpPage/Help.html">Help</a>
        </nav>
        <div class="dropdown">
            <button class="dropdown-button">Sign up <span class="arrow">&#9660;</span></button>
            <div class="dropdown-content">
                <a href="../Login-OTP/UserLogin.html">Login</a>
                <a href="../CreateAccount/CreateAccount.html">Sign up</a>
            </div>
        </div>
    </header>
    <div class="container">
    <div class="header-second">
        

<main>
<section>

<form id="resetForm" method="post" action="/someAction">

    <div>
        <a href="../Login-OTP/UserLogin.html" class="back"> ‚Üê Back</a> 
        <h2>Reset Your Password</h2>
    <label for="newpass">Email</label>
        <input
        type="email"
        id="email"
        name="email"
        required
        title="2 to 20 letters"
        placeholder="Please enter your account email" />
        </div>
        
    <div>
    <label for="newpass">New Password</label>
        <input
        type="password"
        id="newpass"
        name="newpass"
        required
        pattern="[a-zA-Z]{2,20}"
        title="2 to 20 letters"
        placeholder="Please use a strong password" />
    </div>
            
    <div>
    <label for="confpass">Confirm New Password</label>
    <input
    type="password"
    id="confpass"
    name="confpass"
    required
    pattern="[a-zA-Z]{2,20}"
    title="2 to 20 letters"
    placeholder="Please re-enter your password"/>
    </div>


    <div> 
        <button type="button" onclick="handleConfirm()"> Reset Password </button>
    </div>

</form>
</section>
</main>
</body>

<script type="module">
    import { postData } from '/js/http-calls.js';

    async function handleConfirm() {
        const email = document.getElementById('email').value;
        const newpass = document.getElementById('newpass').value;
        const confpass = document.getElementById('confpass').value;

        if (newpass === confpass) {
            const data = { email, newPassword: newpass };
            try {
                const response = await postData('/api/auth/forgot-password', data);
                if (response.statusCode === 201) {
                    window.location.href = '../ForgotPassword/SuccessReset.html';
                } else {
                    alert('Error: ' + response.message);
                }
            } catch (error) {
                console.error('Error:', error);
            }
        } else {
            alert('Passwords do not match');
        }
    }
</script>
<footer> </footer>

</html>